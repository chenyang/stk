<div class="container-fluid stock-analysis" ng-controller="StockAnalysisCtrl">
	<div class="stock-graph-block">
		<div class="row">
			<div class="col-xs-3 revenu-block-left">
				<div >{{pubInfo.stockPrice}}</div>
				<div >{{pubInfo.chgVal}} {{pubInfo.chgPct}}%</div>
				<div >{{pubInfo.today|date:'yyyy-MM-dd'}}</div>
			</div>
			
			<div class="col-xs-6 text-center revenu-block-center">
				<span>总收益 ( 创建于 {{pubInfo.createDate}}) </span>
				<div style="">{{pubInfo.totalProfit}}%</div>
			</div>
			
			<div class="col-xs-3 revenu-block-right">
				<div>
					<!-- 添加评述-->
					<a ng-click="addTip()" href="">
						<span class="glyphicon glyphicon-plus-sign"></span> 添加评述
					</a>
					<!-- 修改预测 -->
					<a href="">
						<span ng-show="prediction==null" ng-click="editPrecidtion()"><span class="glyphicon glyphicon-plus-sign" style="padding-right:2px"></span>发布预测</span>
						<span ng-show="prediction!=null" ng-click="editPrecidtion()"><span class="glyphicon glyphicon-pencil" style="padding-right:2px"></span>修改预测</span>
					</a>
					<!-- 预测解释 -->
					<a href="">
						<span popover-template="predictPopover.templateUrl" popover-title="{{predictPopover.title}}" popover-trigger="mouseenter" popover-placement="left"><span class="glyphicon glyphicon-eye-open"></span> 预测解释 </span>
					</a>
					
				</div>
			</div>
			<div class="col-xs-12 chart">
				<nvd3 options="options"
			      data="graphData"
			      config="config"
			      events="events"
			      api="api">
			    </nvd3>
			</div>
		</div>
	</div>
	
	<div class="row stock-gushen-comment">
		<div class="col-xs-3 col-md-3 col-md-2 col-lg-1 text-center">
			<div><img src="images/home/gushen.png" ng-click="gotoProfile()"></div>
			<div class="user-star">
				<span class="glyphicon glyphicon-star"></span>
				<span class="glyphicon glyphicon-star"></span>
				<span class="glyphicon glyphicon-star"></span>
				<span class="glyphicon glyphicon-star"></span>
				<span class="glyphicon glyphicon-star"></span>
			</div>
			
		</div>
		<div class="col-xs-9 col-md-9 col-md-10 col-lg-11">
			<div class="title clearfix">
				<span class="username"><b>{{pubInfo.owner}}</b></span>
				<span class="pull-right glyphicon glyphicon-thumbs-up"><span style="font-size:12px">{{pubInfo.totalLikes}} 个赞</span></span>
			</div>
			<div class="content">
				<p>
					{{pubInfo.desc}}
				<p>
			</div>
		</div>
	</div>
	
	<div style="margin-top:25px;" ng-show="pubInfo.tips.length==0" class="well">
	  <div class="text-center">
	   		<h3>无可用股票评论</h3>
	  </div>
	</div>
	<div class="row announcement-timeline">
		<div ng-repeat="item in pubInfo.tips"> <!-- ng-repeat -->
			<div class="header col-xs-12">
				<span class="icon glyphicon glyphicon-volume-up"></span>
				<span class="time">{{item.newsDate}}</span>
			</div>
			<div class="col-xs-12 timeline-content-block">
				<div class="content">
					<p>
						<b>{{item.newsTitle}}</b> 
						<pre>{{item.newsContent}}</pre>
					</p>
					<p class="bg-info" style="padding:5px 10px;">最后<a href="#/history/tip/{{item.tipId}}">修改于</a>{{item.lastModifiedTime}}</p>
				</div>
				<div class="gushen-comment-block clearfix">
					<div class="pull-left" ng-click="gotoProfile()"><img width="60%" src="images/home/gushen.png"></div>
					<div class="clearfix">
						<b>{{pubInfo.owner}}</b>
						<p>
							<button ng-show="!pubInfo.available" class="btn btn-info btn-small" ng-click="visitOrBuyPub(item)">
								<span>购买此Pub</span>
							</button>
							<button class="btn btn-danger btn-small" ng-click="modifyTip(item)">
								<span ng-if="item.isModifyTip">保存修改</span>
								<span ng-if="!item.isModifyTip">修改Tip</span>
							</button>
						</p> 
						<textarea ng-show="item.isModifyTip" rows="4" style="width:100%; border-radius:4px; margin-bottom:15px;" ng-model="item.tipContent"></textarea>
					</div>
					<div ng-show="!item.isModifyTip">
						<pre>{{item.tipContent}}</pre>
					</div>
					<div class="clearfix share-block">
						<div collapse="item.isCollapsedShare" class="pull-left user-comments">
							<button class="btn"><img width="25px" src="images/3rd/qq.png"></button>
							<button class="btn"><img width="25px" src="images/3rd/wb.png"></button>
							<button class="btn"><img width="25px" src="images/3rd/wx.png"></button>
						</div> 
						<div class="pull-right">
							<button class="btn btn-default btn-small" ng-click="item.isCollapsedShare=!item.isCollapsedShare">分享到朋友圈</button>
							<button  ng-click="item.isCollapsedCmt = !item.isCollapsedCmt" class="btn btn-default">
								<span class="glyphicon glyphicon-thumbs-up" style="padding-right:2px"></span>{{item.nbLikes}} 
								<span class="glyphicon glyphicon-thumbs-down" style="padding-right:2px"></span>{{item.nbDislikes}}
							</button>
							<!-- <button class="btn btn-default"><span class="glyphicon glyphicon-thumbs-up" style="padding-right:2px"></span> 234</button> -->
						</div>
					</div>
							
					<div collapse="item.isCollapsedCmt" class="user-comments">
						<div ng-repeat="cmt in item.comments.likes">
							<div class="col-xs-12">
								<div>
									<span class="glyphicon glyphicon-thumbs-up" style="color:red"></span>
									<img src="images/3rd/qq.png" style="width:25px;">
									<span><b>{{cmt.username}}</b></span>
									<span>[{{cmt.time}}]</span>
								</div>
								<div>
									<p style="padding-left:50px">{{cmt.cmt}}</p>
								</div>
							</div>
						</div>
						<div ng-repeat="cmt in item.comments.dislikes">
							<div class="col-xs-12">
								<div>
									<span class="glyphicon glyphicon-thumbs-down" style="color:green"></span>
									<img src="images/3rd/qq.png" style="width:25px;">
									<span><b>{{cmt.username}}</b></span>
									<span>[{{cmt.time}}]</span>
								</div>
								<div>
									<p style="padding-left:50px">{{cmt.cmt}}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div><!-- timeline-content-block -->
		</div><!-- ng-repeat -->
		
	</div><!-- row -->
</div>